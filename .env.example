# PostgreSQL Configuration (Single instance, single schema)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres_password_change_in_production
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_MAX_CONNECTIONS=25
POSTGRES_DB=maktaba

# Database Connection String
MAKTABA_DB_URL=postgres://postgres:postgres_password_change_in_production@postgres:5432/maktaba?sslmode=disable

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_MAX_RETRIES=3

# Redpanda (Kafka) Configuration
REDPANDA_HOST=redpanda
REDPANDA_KAFKA_PORT=9092
REDPANDA_ADMIN_PORT=9644

# Kafka Topics
KAFKA_TOPIC_SOURCE_CREATED=source.created
KAFKA_TOPIC_SOURCE_UPDATED=source.updated
KAFKA_TOPIC_NOTE_CREATED=note.created
KAFKA_TOPIC_NOTE_UPDATED=note.updated
KAFKA_TOPIC_NOTE_DELETED=note.deleted
KAFKA_TOPIC_SCRAPE_RAW=scrape.raw
KAFKA_TOPIC_SCRAPE_PROCESSED=scrape.processed
KAFKA_TOPIC_USER_ACTION=user.action

# Meilisearch Configuration
MEILISEARCH_HOST=http://meilisearch
MEILISEARCH_PORT=7700
MEILISEARCH_MASTER_KEY=meilisearch_master_key_change_in_production

# ORY Kratos Configuration
ORY_KRATOS_PUBLIC_URL=http://localhost:4433
ORY_KRATOS_ADMIN_URL=http://kratos:4434
ORY_KRATOS_SECRETS_COOKIE=random_secret_change_in_production
ORY_KRATOS_SECRETS_DEFAULT=random_secret_change_in_production
ORY_KRATOS_SUBJECT_IDENTIFIER_ENABLED=true

# ORY Hydra Configuration
ORY_HYDRA_PUBLIC_URL=http://localhost:4444
ORY_HYDRA_ADMIN_URL=http://hydra:4445
ORY_HYDRA_SECRETS_SYSTEM=random_secret_change_in_production
ORY_HYDRA_SECRETS_COOKIE=random_secret_change_in_production
ORY_HYDRA_URLS_CONSENT=http://localhost:4433/consent
ORY_HYDRA_URLS_LOGIN=http://localhost:4433/login
ORY_HYDRA_URLS_ISSUE=http://localhost:4433/login
ORY_HYDRA_URLS_ERROR=http://localhost:4433/error
ORY_HYDRA_OIDC_SUBJECT_IDENTIFIERS_SUPPORTED_TYPES=public,pairwise

# Oathkeeper Configuration
ORY_OATHKEEPER_CONFIG_FILE=/etc/config/oathkeeper.yml

# Service Ports
MAKTABA_PORT=8080
BAHITH_PORT=8003
MURSHID_PORT=8004

# Service URLs
MAKTABA_URL=http://maktaba:8080
BAHITH_URL=http://bahith:8003
MURSHID_URL=http://murshid:8004

# JWT Configuration (fallback for development)
JWT_SECRET=jwt_secret_change_in_production
JWT_ISSUER=bayt-alhikmah
JWT_AUDIENCE=bayt-alhikmah-users
JWT_EXPIRY_MINUTES=60

# OpenTelemetry Configuration
OTEL_EXPORTER_ENDPOINT=http://tempo:4317
OTEL_SERVICE_NAME_PREFIX=bayt-alhikmah

# Environment
ENVIRONMENT=development
LOG_LEVEL=debug

# CORS Configuration
CORS_ALLOW_ORIGINS=*
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization

# Trust Gateway Headers (for internal service-to-service auth)
TRUST_GATEWAY_HEADER=false

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# Session Management
SESSION_COOKIE_NAME=ory_session
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SAME_SITE=lax
